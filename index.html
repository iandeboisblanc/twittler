<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <header>
      <button type='button' id='refresh'>Refresh Tweets</button>
    </header>
    <main>
      <script>

        $(document).ready(function(){
          var $main = $('main');
          var currentIndex = 0;

          var index = streams.home.length - 1;
          while(index >= 0){
            var $tweet = createTweetHTML(streams.home[index]);
            // Append tweet to body:
            $tweet.appendTo($main);
            index -= 1;
          }

        });

        function createTweetHTML(tweet){
          var $tweet = $('<div class="tweet"></div>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message);
          // Create timeStamp element:
          var timeStamp = tweet.created_at;
          var $timeStamp = $('<footer class="timeStamp"></footer>');
          $timeStamp.text(timeStamp);
          $timeStamp.appendTo($tweet);
          return $tweet;
        }

        function refreshTweets(){
          for(var index = currentIndex; index < streams.home.length; index++) {
            var $tweet = createTweetHTML(streams.home[index]);
            $tweet.prependTo($main);
          }
          currentIndex = streams.home.length;
        }

      </script>
    </main>
  </body>
</html>
